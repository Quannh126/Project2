<%- include ('../playout/header.ejs') -%>

<div class="container">
    <% if(errors) { %>
        <% errors.forEach(function(e){ %>
    <div class="alert alert-danger row ">
        <%= e%>    
    </div>
    <%});%>
    <% };%>
    <div class="row">
        <form action="" method="POST" enctype="multipart/form-data">
            
                <div class="form-group">
                    <label class="form-label" for="name">Tên</label>
                    <div class="controls">
                        <input type="text" id="name" class="form-control" name="name" value="<%= (product ? product.name:'')%>">
                    </div>
                </div>
                                  
                <div class="form-group">
                    <label for="img">Ảnh Sản phẩm</label>
                    <div class="custom-file">
                        <label class="custom-file-label" for="customFile">Choose file</label>
                        <input type="file" class="custom-file-input" id="img" name="avatar" accept=".png, .jpg, .jpeg">
                    </div>
                    <img class="mt-2" id="oldimg"  alt="" src="/<%= product.img%>" width="200px">
                    <img class="mt-2" id="showimg"  alt="" width="200px" style="border: 0;">
                </div>

                <div class="form-group">
                    <label class="form-label" for="price">Giá</label>
                    <div class="controls">
                        <input type="number" id="price" min="0" class="form-control" name="price" value="<%= product.price%>">
                    </div>
                </div>
            
                <div class="form-group">
                    <label class="form-label">Loại</label>
                    <div class="controls">
                        <select class="form-control" id="cate" name="cate">
                            <%var id = 0%>
                            <% var keys = Object.keys(cates)%>
                            <% keys.forEach(function(key){id++; %> 
                                <!-- <option value="<%= cates[key].id%>"><%= cates[key].name%></option> -->
                                <option value="<%= cates[key].id%>" <%= (key == product.cate) ? 'selected=\"selected\"' : ''%>><%= cates[key].name%></option>
                            <%})%>
                        </select>
                    </div>
                </div>
                 
                <div class="form-group">
                    <label class="form-label" for="field-120334">Chi Tiết Sản Phẩm</label>
                    <span class="desc"></span>
                    <div class="controls">
                        <textarea name="des" id="des" class="form-control autogrow" cols="5"><%= product.des%></textarea>
                    </div>
                </div>
            
                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn btn-primary">Save</button>
                    <a href="/products/listproducts" class="btn btn-secondary">Cancel</a>
                </div>
        </form>
    </div> 
    
</div>
<script src="/js/addproduct.js"></script>
<%- include ('../playout/footer.ejs') -%>
